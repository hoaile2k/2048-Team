{"version":3,"sources":["../../../../assets/Script/assets/Script/CreateBlock.js"],"names":["Emitter","require","emitName","cc","Class","extends","Component","properties","blockPrefab","Prefab","_listBlock","_arrayBlock","onLoad","systemEvent","on","SystemEvent","EventType","KEY_UP","onKeyUp","bind","evtGenerate","generate","instance","registerEvent","start","index","block","instantiate","getComponent","labelPrefab","string","parent","node","push","randomNumber","Math","floor","random","length","emit","blockColor","event","keyCode","macro","KEY","up","moveUp","down","moveDown","left","moveLeft","right","moveRight","update","dt"],"mappings":"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","file":"CreateBlock.js","sourceRoot":"../../../../assets/Script","sourcesContent":["const Emitter = require(\"mEmitter\")\nconst emitName = require(\"emitName\")\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        blockPrefab: cc.Prefab,\n        _listBlock: [],\n        _arrayBlock: [],\n    },\n\n    onLoad() {\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp.bind(this))\n\n        this.evtGenerate = this.generate.bind(this)\n        Emitter.instance.registerEvent(emitName.generate, this.evtGenerate)\n    },\n\n    start() {\n        for (let index = 0; index <= 15; index++) {\n            let block = cc.instantiate(this.blockPrefab)\n            block.getComponent(\"block\").labelPrefab.string = 0\n            block.parent = this.node\n            this._arrayBlock.push(block.getComponent(\"block\").labelPrefab.string)\n            this._listBlock.push(block)\n        }\n        this.generate()\n        this.generate()\n    },\n    generate() {\n        let randomNumber = Math.floor(Math.random() * this._listBlock.length)\n        if (this._arrayBlock[randomNumber]==0) {\n            this._arrayBlock[randomNumber] = 2\n            this._listBlock[randomNumber].getComponent(\"block\").labelPrefab.string = 2\n        } else { this.generate() }\n        Emitter.instance.emit(emitName.blockColor, this._listBlock, this._arrayBlock)\n    },\n\n    onKeyUp(event) {\n        switch (event.keyCode) {\n            case cc.macro.KEY.up:\n                this.moveUp()\n                break;\n\n            case cc.macro.KEY.down:\n                this.moveDown()\n                break;\n\n            case cc.macro.KEY.left:\n                this.moveLeft()\n                break;\n\n            case cc.macro.KEY.right:\n                this.moveRight()\n                break;\n        }\n    },\n    moveUp :function() {\n        Emitter.instance.emit(emitName.moveUp, this._listBlock, this._arrayBlock,this.generate)\n        // this.generate()\n    },\n    moveDown :function() {\n        Emitter.instance.emit(emitName.moveDown, this._listBlock, this._arrayBlock,this.generate)\n        // this.generate()\n    },\n    moveLeft :function() {\n        Emitter.instance.emit(emitName.moveLeft, this._listBlock, this._arrayBlock,this.generate)\n        // this.generate()\n    },\n    moveRight :function() {\n        Emitter.instance.emit(emitName.moveRight, this._listBlock, this._arrayBlock,this.generate)\n        // this.generate()\n    },\n\n    update(dt) {\n\n    },\n\n});\n"]}